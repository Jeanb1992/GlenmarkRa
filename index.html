<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Presentación Glenmark</title>
  
  <!-- Import map debe ir antes de cualquier script type="module" -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
      }
    }
  </script>
  
  <!-- Tracking.js para detección de imágenes -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tracking.js/1.1.3/tracking-min.js"></script>
  
  <!-- Script principal -->
  <script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    // Mover todas las funciones y variables dentro del módulo
    window.scenes = {};
    window.animations = {};
    window.renderers = {};

    function disposeScene(scene) {
      if (!scene) return;
      
      scene.traverse((object) => {
        if (object.geometry) {
          object.geometry.dispose();
        }
        
        if (object.material) {
          if (object.material.length) {
            for (const material of object.material) disposeMaterial(material);
          } else {
            disposeMaterial(object.material);
          }
        }
      });
    }

    function disposeMaterial(material) {
      if (!material) return;
      
      Object.keys(material).forEach(prop => {
        if (!material[prop]) return;
        if (material[prop].isTexture) {
          material[prop].dispose();
        }
      });
      
      material.dispose();
    }

    function cleanupWebGLContext(containerId) {
      if (window.renderers[containerId]) {
        const renderer = window.renderers[containerId];
        if (window.scenes[containerId]) {
          disposeScene(window.scenes[containerId]);
          delete window.scenes[containerId];
        }
        renderer.dispose();
        renderer.forceContextLoss();
        renderer.domElement.remove();
        delete window.renderers[containerId];
      }
    }

    window.setupModel = function(containerId, modelPath, options = {}) {
      // Limpiar contexto anterior si existe
      cleanupWebGLContext(containerId);

      const container = document.getElementById(containerId);
      if (!container) return;

      // Función para calcular escala relativa
      function calculateRelativeScale(baseScale) {
        const containerWidth = container.clientWidth;
        const containerHeight = container.clientHeight;
        const minDimension = Math.min(containerWidth, containerHeight);
        const baseSize = 1024; // Tamaño base de referencia
        
        // Calculamos la escala base
        let scale = (minDimension / baseSize) * baseScale;
        
        // Establecemos límites mínimos y máximos para la escala
        const minScale = baseScale * 0.5; // No permitir que sea menor al 50% del tamaño base
        const maxScale = baseScale * 1.5; // No permitir que sea mayor al 150% del tamaño base
        
        // Aplicamos los límites
        scale = Math.max(minScale, Math.min(scale, maxScale));
        
        return scale;
      }

      // Crear el renderer con configuración básica
      const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
        preserveDrawingBuffer: false,
        powerPreference: "high-performance",
        precision: "highp",
        stencil: false,
        depth: true,
        logarithmicDepthBuffer: true
      });

      // Configuración mejorada del renderer
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.outputColorSpace = THREE.SRGBColorSpace;
      renderer.toneMapping = THREE.NoToneMapping;
      renderer.shadowMap.enabled = false;

      window.renderers[containerId] = renderer;
      container.appendChild(renderer.domElement);

      // Crear escena con configuración mínima
      const scene = new THREE.Scene();
      scene.background = null;
      window.scenes[containerId] = scene;

      // Configurar cámara con valores seguros
      const camera = new THREE.PerspectiveCamera(
        45,
        container.clientWidth / container.clientHeight,
        0.1,
        1000
      );

      // Iluminación simplificada
      const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
      scene.add(ambientLight);

      const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
      directionalLight.position.set(5, 5, 5);
      scene.add(directionalLight);

      let mixer;
      let animationFrameId;
      const clock = new THREE.Clock();

      // Función para detener la animación
      function stopAnimation() {
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
          animationFrameId = null;
        }
        if (mixer) {
          mixer.stopAllAction();
        }
      }

      // Función para manejar la pérdida de contexto
      function handleContextLost(event) {
        event.preventDefault();
        console.log('Contexto WebGL perdido');
        stopAnimation();
      }

      // Función para manejar la restauración de contexto
      function handleContextRestored() {
        console.log('Contexto WebGL restaurado');
        renderer.setSize(container.clientWidth, container.clientHeight);
        if (options.animate) {
          animate();
        }
      }

      renderer.domElement.addEventListener('webglcontextlost', handleContextLost, false);
      renderer.domElement.addEventListener('webglcontextrestored', handleContextRestored, false);

      // Función para inicializar la escena
      function initScene() {
        const loader = new GLTFLoader();
        
        loader.load(modelPath, 
          function(gltf) {
            const model = gltf.scene;
            
            if (options.scale) {
              // Convertir la escala a relativa
              const relativeScale = calculateRelativeScale(options.scale);
              model.scale.set(relativeScale, relativeScale, relativeScale);
            }
            
            if (options.position) {
              // Ajustar posiciones relativamente al tamaño del contenedor
              const containerWidth = container.clientWidth;
              const containerHeight = container.clientHeight;
              
              // Convertir las coordenadas a porcentajes del contenedor
              const xPos = (options.position.x / 100) * containerWidth;
              const yPos = (options.position.y / 100) * containerHeight;
              const zPos = options.position.z || 0;
              
              model.position.set(xPos, yPos, zPos);
            }

            if (options.rotation) {
              model.rotation.set(
                options.rotation.x || 0,
                options.rotation.y || 0,
                options.rotation.z || 0
              );
            }

            // Configuración de luces mejorada
            const ambientLight = new THREE.AmbientLight(0xffffff, 2.0);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 2.5);
            directionalLight.position.set(5, 5, 5);
            scene.add(ambientLight);
            scene.add(directionalLight);

            model.traverse((child) => {
              if (child.isMesh) {
                child.castShadow = true;
                child.receiveShadow = true;
                if (child.material) {
                  child.material.needsUpdate = true;
                  child.material.side = THREE.DoubleSide;
                  
                  // Ajustar propiedades del material según el modelo
                  const modelId = containerId.toLowerCase();
                  if (modelId.includes('pharma') || 
                      modelId.includes('investigacion2') || 
                      modelId.includes('microscopio')) {
                    child.material.metalness = 0;
                    child.material.roughness = 1;
                    child.material.envMapIntensity = 1.0;
                    child.material.color.setRGB(1, 1, 1); // Reset color to white
                  } else {
                    child.material.metalness = 0.2;
                    child.material.roughness = 0.5;
                    child.material.envMapIntensity = 2.0;
                  }
                }
              }
            });

            scene.add(model);
            camera.position.z = options.cameraZ || 5;

            if (options.animate && gltf.animations && gltf.animations.length > 0) {
              mixer = new THREE.AnimationMixer(model);
              const action = mixer.clipAction(gltf.animations[0]);
              action.setLoop(THREE.LoopOnce);
              action.clampWhenFinished = true;
              action.play();

              // Si estamos en la pantalla 4, configurar el evento finished
              if (containerId === 'model-menu-inicial') {
                mixer.addEventListener('finished', () => {
                  setTimeout(() => {
                    const buttons = [
                      'operaciones-btn',
                      'investigacion-btn',
                      'cadena-btn',
                      'biotecnologia-btn',
                      'vision-btn',
                      'glenmark-btn'
                    ];
                    
                    buttons.forEach(id => {
                      const button = document.getElementById(id);
                      if (button) {
                        button.classList.add('show-buttons');
                      }
                    });
                  }, 500);
                });
              }

              if (containerId === 'model-menu2') {
                mixer.addEventListener('finished', () => {
                  setTimeout(() => {
                    const menu2Buttons = document.querySelectorAll('.menu-2-button');
                    menu2Buttons.forEach(button => {
                      button.classList.add('show-buttons');
                    });
                  }, 500);
                });
              }
            }

            if (options.onLoad) {
              options.onLoad(model);
            }

            if (options.clickable) {
              container.style.cursor = 'pointer';
              container.onclick = (event) => {
                if (options.onClick) options.onClick();
              };
            }

            function animate() {
              if (!window.renderers[containerId]) return;

              try {
                if (mixer) {
                  const delta = clock.getDelta();
                  mixer.update(delta);
                }

                renderer.render(scene, camera);
                
                if (options.animate) {
                  animationFrameId = requestAnimationFrame(animate);
                  window.animations[containerId] = animationFrameId;
                }
              } catch (error) {
                console.error('Error en el loop de renderizado:', error);
                stopAnimation();
              }
            }

            if (options.animate) {
              animate();
            } else {
              renderer.render(scene, camera);
            }
          },
          null,
          function(error) {
            console.error('Error cargando modelo:', error);
          }
        );
      }

      initScene();
    };

    window.showScreen = function(screenNumber) {
      console.log(`Navegando a la escena ${screenNumber}`);
      
      // Limpiar todos los modelos 3D de la pantalla actual
      const currentScreenElement = document.querySelector(`#screen${currentScreen}`);
      if (currentScreenElement) {
        const containers = currentScreenElement.querySelectorAll('.model-3d');
        containers.forEach(container => {
          const containerId = container.id;
          cleanupWebGLContext(containerId);
        });
      }
      
      // Ocultar pantalla actual
      document.querySelector(`#screen${currentScreen}`).classList.remove('active');
      
      // Mostrar nueva pantalla
      document.querySelector(`#screen${screenNumber}`).classList.add('active');
      currentScreen = screenNumber;
      
      // Configurar modelos 3D según la pantalla
      switch(screenNumber) {
        case 2:
          setupModel('model-boton-comenzar', './src/assets/3d/gltf/esfera-inicio.gltf', {
            scale: 100.0,
            position: { x: -1.3, y: -1.1, z: 0.5 },
            rotation: { x: 0, y: 0, z: 0 },
            clickable: true,
            cameraZ: 12,
            onClick: () => showScreen(3)
          });
          break;
        case 3:
          setupModel('model-esfera-inicial', './src/assets/3d/gltf/esfera-inicial-estatica.gltf', {
            scale: 80.0,
            position: { x: -1, y: -0.4, z: 0 },
            rotation: { x: 0, y: 0, z: 0 },
            cameraZ: 20
          });
          break;
        case 4:
          setupModel('model-menu-inicial', './src/assets/3d/gltf/menu-inicial-animacion.gltf', {
            scale: 58.0,
            position: { x: -1, y: -0.3, z: 0 },
            rotation: { x: 0, y: 0, z: 0 },
            cameraZ: 20,
            animate: true
          });
          break;
        case 5:
          setupModel('model-glenmark', './src/assets/3d/gltf/boton-glenmark-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.1, y: -0.25, z: 0 },
            animate: true
          });
          break;
        case 6:
          setupModel('model-vision', './src/assets/3d/gltf/boton-vision-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.23, y: -0.23, z: 0 },
            animate: true
          });
          break;
        case 7:
          setupModel('model-biotecnologia', './src/assets/3d/gltf/boton-biotecnologia-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.21, y: -0.23, z: 0 },
            animate: true
          });
          break;
        case 8:
          setupModel('model-cadena', './src/assets/3d/gltf/boton-cadena-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.1, y: -0.23, z: 0 },
            animate: true
          });
          break;
        case 9:
          setupModel('model-investigacion', './src/assets/3d/gltf/boton-investigacion-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.2, y: -0.25, z: 0 },
            animate: true
          });
          break;
        case 10:
          setupModel('model-operaciones', './src/assets/3d/gltf/boton-operaciones-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.2, y: -0.21, z: 0 },
            animate: true
          });
          setupModel('model-mapa', './src/assets/3d/gltf/mapa-animado.gltf', {
            scale: 13.0,
            position: { x: -0.15, y: 0.3, z: 0 },
            rotation: { x: 0.9, y: 0, z: 0 },
            animate: true,
            cameraZ: 10
          });
          break;
        case 11:
          setupModel('model-menu2', './src/assets/3d/gltf/menu2-animacion.gltf', {
            scale: 14.0,
            position: { x: -0.205, y: -0.08, z: 0 },
            animate: true
          });
          break;
        case 12:
          setupModel('model-plantas', './src/assets/3d/gltf/boton-esfera-plantas-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.29, y: -0.27, z: 0 },
            animate: true
          });
          break;
        case 13:
          setupModel('model-pharma', './src/assets/3d/gltf/boton-esfera-investigacion-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.2, y: -0.15, z: 0 },
            animate: true
          });
          break;
        case 14:
          setupModel('model-investigacion2', './src/assets/3d/gltf/boton-engranaje-investigacion-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.3, y: -0.18, z: 0 },
            animate: true
          });
          break;
        case 15:
          setupModel('model-engranaje', './src/assets/3d/gltf/boton-engranaje-pharma-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.25, y: -0.23, z: 0 },
            animate: true
          });
          break;
        case 16:
          setupModel('model-microscopio', './src/assets/3d/gltf/boton-engranaje-microscopio-animacion.gltf', {
            scale: 20.0,
            position: { x: -0.16, y: -0.18, z: 0 },
            animate: true
          });
          break;
        case 17:
          setupModel('model-grafico', './src/assets/3d/gltf/grafico-barras-animado.gltf', {
            scale: 25.0,
            position: { x: -0.35, y: -0.23, z: 0 },
            rotation: { x: 0, y: -(Math.PI * -30) / 180, z: 0 },
            animate: true
          });
          break;
        case 19:
          setupModel('model-cajas', './src/assets/3d/gltf/cajas.gltf', {
            scale: 10.0,
            position: { x: -0.08, y: -0.13, z: 0 },
            animate: true
          });
          break;
        case 20:
          setupModel('model-cajas2', './src/assets/3d/gltf/cajas.gltf', {
            scale: 10.0,
            position: { x: -0.08, y: -0.13, z: 0 },
            animate: true
          });
          break;
      }

      updateNavigationButtons();
    };

    window.previousScreen = function() {
      if (currentScreen > 2) {
        console.log('Navegación: Retrocediendo a pantalla anterior');
        showScreen(currentScreen - 1);
      }
    };

    window.nextScreen = function() {
      if (currentScreen < totalScreens) {
        console.log('Navegación: Avanzando a siguiente pantalla');
        showScreen(currentScreen + 1);
      }
    };

    window.updateNavigationButtons = function() {
      const prevButton = document.getElementById('prev-button');
      const nextButton = document.getElementById('next-button');
      
      // Lista de pantallas donde se deben ocultar las flechas
      const hideNavigationScreens = [2];
      
      // Ocultar ambas flechas si estamos en una de las pantallas especificadas
      if (hideNavigationScreens.includes(currentScreen)) {
        prevButton.style.display = 'none';
        nextButton.style.display = 'none';
        return;
      } else {
        prevButton.style.display = 'block';
        nextButton.style.display = 'block';
      }
      
      // Configurar estados de deshabilitado para las demás pantallas
      if (currentScreen <= 2) {
        prevButton.style.opacity = '0.5';
        prevButton.style.pointerEvents = 'none';
        prevButton.onclick = null;
      } else {
        prevButton.style.opacity = '1';
        prevButton.style.pointerEvents = 'auto';
        prevButton.onclick = previousScreen;
      }

      if (currentScreen >= totalScreens) {
        nextButton.style.opacity = '0.5';
        nextButton.style.pointerEvents = 'none';
        nextButton.onclick = null;
      } else {
        nextButton.style.opacity = '1';
        nextButton.style.pointerEvents = 'auto';
        nextButton.onclick = nextScreen;
      }
    };

    // Variables globales
    window.currentScreen = 'scanner';
    window.totalScreens = 21;
    let videoElement;
    let canvasElement;
    let canvasContext;
    let targetImage;
    let tracker;

    // Función para inicializar la cámara
    async function initCamera() {
      try {
        videoElement = document.getElementById('camera-feed');
        
        // Detener cualquier stream existente
        if (videoElement.srcObject) {
          const tracks = videoElement.srcObject.getTracks();
          tracks.forEach(track => track.stop());
          videoElement.srcObject = null;
        }

        // Esperar un momento antes de iniciar el nuevo stream
        await new Promise(resolve => setTimeout(resolve, 100));

        const stream = await navigator.mediaDevices.getUserMedia({ 
          video: { 
            facingMode: 'environment',
            width: { ideal: 1280 },
            height: { ideal: 720 }
          } 
        });

        videoElement.srcObject = stream;
        
        // Manejar la promesa del play() explícitamente
        try {
          await videoElement.play();
        } catch (playError) {
          console.warn("Error en play():", playError);
          // Intentar reproducir nuevamente después de un breve retraso
          setTimeout(async () => {
            try {
              await videoElement.play();
            } catch (retryError) {
              console.error("Error en segundo intento de play():", retryError);
            }
          }, 1000);
        }

        canvasElement = document.createElement('canvas');
        canvasContext = canvasElement.getContext('2d');

        // Cargar la imagen objetivo
        targetImage = new Image();
        targetImage.src = './src/assets/markers/TARJETA.jpg';
        
        targetImage.onload = () => {
          initTracker();
        };

        canvasElement.width = videoElement.videoWidth;
        canvasElement.height = videoElement.videoHeight;
      } catch (error) {
        console.error("Error iniciando la cámara:", error);
      }
    }

    // Inicializar el tracker
    function initTracker() {
      console.log('Iniciando tracker...');
      
      tracker = new tracking.ColorTracker(['magenta']);
      
      tracking.ColorTracker.registerColor('magenta', function(r, g, b) {
        if ((r > 100 && g < 100 && b > 100) ||    
            (r > 150 && g < 80 && b > 150) ||     
            (r > 200 && g < 50 && b > 200)) {     
          return true;
        }
        return false;
      });
      
      let hasDetected = false;
      const trackTask = tracking.track('#camera-feed', tracker);
      
      tracker.on('track', function(event) {
        if (hasDetected) return;
        
        if (event.data.length > 0) {
          console.log('¡Target detectado!');
          
          hasDetected = true;
          tracker.removeAllListeners();
          trackTask.stop();

          // Agregar retraso de 1 segundo antes de cambiar a la pantalla 2
          setTimeout(() => {
            // Primero cambiar a la pantalla 2
            document.getElementById('scanner-screen').classList.remove('active');
            document.getElementById('screen2').classList.add('active');
            window.currentScreen = 2;
            updateNavigationButtons();
            
            // Luego cargar el modelo con un pequeño retraso para asegurar que el contenedor esté listo
            setTimeout(() => {
              setupModel('model-boton-comenzar', './src/assets/3d/gltf/esfera-inicio.gltf', {
                scale: 100.0,
                position: { x: -1.3, y: -1.1, z: 0.5 },
                rotation: { x: 0, y: 0, z: 0 },
                clickable: true,
                cameraZ: 12,
                onClick: () => showScreen(3)
              });
            }, 100); // Aumentado el tiempo de espera para asegurar que el contenedor esté listo
          }, 500);
        }
      });
    }

    // Función para reiniciar el scanner
    function resetScanner() {
      // Ocultar todas las pantallas excepto el scanner
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });
      document.getElementById('scanner-screen').classList.add('active');
      window.currentScreen = 'scanner';
      
      // Reiniciar la cámara y el tracking
      if (videoElement && videoElement.srcObject) {
        const stream = videoElement.srcObject;
        if (stream) {
          stream.getTracks().forEach(track => track.stop());
        }
      }
      initCamera();
    }

    // Inicialización
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        await initCamera();
      } catch (error) {
        console.error("Error en la inicialización:", error);
      }
    });

    // Agregar evento para reiniciar cuando se actualiza la página
    window.addEventListener('beforeunload', function() {
      localStorage.setItem('shouldReset', 'true');
    });

    // Verificar si debemos reiniciar al cargar
    if (localStorage.getItem('shouldReset')) {
      localStorage.removeItem('shouldReset');
      resetScanner();
    }

    window.toggleHelp = function(screenNumber) {
        console.log(`Mostrando/Ocultando ayuda en pantalla ${screenNumber}`);
        const helpInfo = document.getElementById(`help-info-${screenNumber}`);
        helpInfo.classList.toggle('active');
    };

    window.goToOperaciones = function() {
        console.log('Navegando a Operaciones');
        showScreen(10);
    };

    window.goToInvestigacion = function() {
        console.log('Navegando a Investigación');
        showScreen(8);
    };

    window.goToCadena = function() {
        console.log('Navegando a Cadena');
        showScreen(6);
    };

    window.goToBiotecnologia = function() {
        console.log('Navegando a Biotecnología');
        showScreen(5);
    };

    window.goToVision = function() {
        console.log('Navegando a Visión');
        showScreen(9);
    };

    window.goToGlenmark = function() {
        console.log('Navegando a Glenmark');
        showScreen(7);
    };

    window.goToPlantas = function() {
      console.log('Navegando a Plantas');
      showScreen(12);
    };

    window.goToPharma = function() {
      console.log('Navegando a Pharma');
      showScreen(13);
    };

    window.goToInvestigacion2 = function() {
      console.log('Navegando a Investigación 2');
      showScreen(14);
    };

    window.goToEngranaje = function() {
      console.log('Navegando a Engranaje');
      showScreen(15);
    };

    window.goToMicroscopio = function() {
      console.log('Navegando a Microscopio');
      showScreen(16);
    };
  </script>
  <style>
    /* Estilos para el video de la cámara */
    #camera-feed {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        z-index: -2;
    }

    /* Contenedor principal base */
    .contenedor {
        position: relative;
        margin: 0 auto;
        overflow: visible;
        background: rgba(255, 255, 255, 0.85);
        box-shadow: none;
        transition: all 0.3s ease;
        z-index: 1;
        /* Dimensiones base del contenedor */
        width: 1024px;
        height: 768px;
    }

    /* Solo hacer el contenedor transparente cuando el scanner está activo */
    #scanner-screen.active ~ .contenedor {
        background: transparent !important;
    }

    /* Ocultar botones de navegación durante el scanner */
    #scanner-screen.active ~ .contenedor .nav-buttons {
        display: none !important;
    }

    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background: transparent;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
        padding: 10px 20px;
        box-sizing: border-box;
    }

    .screen.active {
        display: block;
    }

    .content-wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
    }

    .model-container {
        width: 300px;
        height: 300px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: auto;
        transform: translateZ(0); /* Activar aceleración por hardware */
        backface-visibility: hidden; /* Mejorar rendimiento */
        perspective: 1000px; /* Mejorar calidad en transformaciones 3D */
    }

    .model-container img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        position: absolute;
        top: 20%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
        image-rendering: -webkit-optimize-contrast; /* Mejorar nitidez en webkit */
        image-rendering: crisp-edges; /* Mejorar nitidez en general */
        -ms-interpolation-mode: nearest-neighbor; /* Mejorar nitidez en IE */
    }

    .model-container canvas {
        width: 100% !important;
        height: 100% !important;
    }

    .model-wrapper {
        position: absolute;
        width: 1024px;
        height: 768px;
        pointer-events: none;
    }

    .model-3d {
        width: 100%;
        height: 100%;
        position: relative;
    }

    .model-3d[onclick] {
        cursor: pointer;
    }

    .nav-buttons {
        position: fixed;
        bottom: 4vh;
        right: 4vw;
        display: flex;
        gap: 1vw;
        z-index: 1000;
        transform-origin: bottom right;
    }

    .nav-button {
        width: 4vw;
        min-width: 30px;
        height: auto;
        cursor: pointer;
        transition: transform 0.2s;
        opacity: 1;
    }

    .nav-button:hover {
        transform: scale(1.1);
    }

    .nav-button[disabled] {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .return-button {
        position: absolute;
        top: 2vh;
        right: 2vw;
        width: 3vw;
        min-width: 5%;
        cursor: pointer;
        transition: transform 0.2s;
        z-index: 100;
    }

    .return-button:hover {
        transform: scale(1.1);
    }

    /* Agregar media queries para responsividad */
    @media (max-width: 1024px) {
        .contenedor {
            width: 100vw;
            height: 75vw; /* Mantener proporción 4:3 */
            max-height: 100vh;
        }
    }

    @media (max-height: 768px) {
        .contenedor {
            height: 100vh;
            width: 133.33vh; /* Mantener proporción 4:3 */
            max-width: 100vw;
        }
    }

    /* Estilos base para los contenedores de imágenes */
    .screen-image {
        
        width: 100%;
        height: 100%;
        z-index: 1;
    }
    #screen6-image {
    padding-left: 5%;}
    #screen11-image {
      width: 100%;
      height: auto;
    }
    #screen13-image {      
      padding-top: 14vh;
    }
    

    /* Estilos para las imágenes dentro de los contenedores */
    .screen-image img {
        
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* Ajustes específicos para cada imagen */
    #screen2-image img {
        transform: translate(0, 0); /* Ajustar posición según necesites */
    }

    #screen3-image img {
        transform: translate(0, 30px); /* Ejemplo de ajuste */
    }

    #screen4-image img {
        transform: translate(15px, -5px); /* Ejemplo de ajuste */
    }

    /* Posiciones para los modelos del menú principal */
    #model-menu-inicial-wrapper {
        position: absolute;
        width: 819px;
        height: 819px;
        top: 384px;
        left: 512px;
        transform: translate(-50%, -50%);
        z-index: 1;
    }
    .menu-button {
      width: 8vw;
      min-width: 27px;
    }

    #model-menu-inicial-wrapper canvas {
        width: 100% !important;
        height: 100% !important;
    }

    /* Posiciones específicas para cada botón */
    #model-biotecnologia-btn-wrapper,
    #model-investigacion-btn-wrapper,
    #model-operaciones-btn-wrapper,
    #model-cadena-btn-wrapper,
    #model-vision-btn-wrapper,
    #model-glenmark-btn-wrapper {
        position: absolute;
        width: 30vw;
        height: 30vw;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    #model-biotecnologia-btn-wrapper {
        top: 50%;
        left: 10%;
        

    }

    #model-investigacion-btn-wrapper {
        top: 50%;
        left: 25%;
    }

    #model-operaciones-btn-wrapper {
        top: 50%;
        left: 40%;
    }

    #model-cadena-btn-wrapper {
        top: 50%;
        left: 55%;
    }

    #model-vision-btn-wrapper {
        top: 50%;
        left: 70%;
    }

    #model-glenmark-btn-wrapper {
        top: 50%;
        left: 85%;
    }

    .model-3d canvas {
        width: 100% !important;
        height: 100% !important;
    }

    /* Posiciones para los modelos animados */
    #model-glenmark-anim-wrapper {
        top: 40%;
        left: 22%;
        transform: translate(-50%, -50%);
        cursor: default;
    }

    #model-vision-anim-wrapper {
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    /* Ajustar el botón de retorno */
    .return-button {
        position: absolute;
        top: 5%;
        right: 5%;
        width: 10px;
        cursor: pointer;
    }

    /* Posiciones para los modelos animados adicionales */
    #model-biotecnologia-anim-wrapper {
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-cadena-anim-wrapper {
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-investigacion-anim-wrapper {
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-operaciones-anim-wrapper {
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-mapa-wrapper {
        top: 72%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80vw;
        height: 80vw;
    }

    /* Posiciones para los botones del menú secundario */
    #model-menu2-wrapper {
        position: absolute;
        width: 921px;
        height: 921px;
        top: 384px;
        left: 512px;
        transform: translate(-50%, -50%);
    }

    #model-plantas-btn-wrapper {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 35%;
        left: 15%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    #model-pharma-btn-wrapper {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 35%;
        left: 32%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    #model-investigacion2-btn-wrapper {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 35%;
        left: 49%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    #model-engranaje-btn-wrapper {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 35%;
        left: 66%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    #model-microscopio-btn-wrapper {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 35%;
        left: 83%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    /* Ajustar el wrapper del modelo de inicio */
    #model-boton-comenzar-wrapper {
        position: absolute;
        width: 512px;
        height: 384px;
        top: 384px;
        left: 512px;
        transform: translate(-50%, -50%);
        z-index: 10;
        pointer-events: auto;
    }

    #model-boton-comenzar {
        width: 100%;
        height: 100%;
        cursor: pointer;
    }

    #model-boton-comenzar canvas {
        width: 100% !important;
        height: 100% !important;
    }

    /* Ajustar el wrapper del modelo de la screen 3 */
    #model-esfera-inicial-wrapper {
        position: absolute;
        width: 60vw;
        height: 60vw;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    #btn1, #btn2 {
      cursor: pointer;
      transition: transform 0.2s;
    }

    #btn1:hover, #btn2:hover {
      transform: scale(1.05);
    }

    #btn1 {
      position: absolute;
      top: 20%;
      left: 75%;      
      height: 30%;
    }

    #btn2 {
      position: absolute;
      top: 20%;
      left: 25%;      
      height: 30%;
    }

    #fondo {
      position: absolute;
      top: 15%;
      left: 50%;
      width: 100%;
    }

    /* Estilos para el botón de ayuda */
    .help-button {
        position: fixed;
        bottom: 4vh;
        left: 4vw;
        width: 4vw;
        min-width: 30px;
        z-index: 1000;
        cursor: pointer;
    }

    .help-info {
        position: fixed;
        bottom: 4vh;
        left: 4.5vw;
        width: 27vw;
        min-width: 200px;
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
        pointer-events: none;
    }

    .help-info.active {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }

    /* Ajustes específicos para tablets */
    @media (max-width: 1024px) {
        .help-info {
            width: 40vw;
        }
    }
    #help-info-19 , #help-info-20 {
    }
    /* Mantener cursor pointer solo en elementos interactivos */
    .nav-button:not([disabled]),
    .return-button,
    .help-button,
    .model-3d[onclick],
    [onclick] {
        cursor: pointer;
    }

    /* Remover todos los efectos de transformación en hover y ajustar cursor */
    #model-biotecnologia-btn-wrapper,
    #model-investigacion-btn-wrapper,
    #model-operaciones-btn-wrapper,
    #model-cadena-btn-wrapper,
    #model-vision-btn-wrapper,
    #model-glenmark-btn-wrapper,
    #model-plantas-btn-wrapper,
    #model-pharma-btn-wrapper,
    #model-investigacion2-btn-wrapper,
    #model-engranaje-btn-wrapper,
    #model-microscopio-btn-wrapper,
    #model-boton-comenzar-wrapper {
        pointer-events: auto;
    }

    /* Estilos específicos para los botones del menú */
    #menu-btn-plantas-wrapper,
    #menu-btn-pharma-wrapper,
    #menu-btn-investigacion-wrapper,
    #menu-btn-engranaje-wrapper,
    #menu-btn-microscopio-wrapper {
        width: 150px;
        height: 150px;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
    }

    #menu-btn-plantas-wrapper { left: 10%; }
    #menu-btn-pharma-wrapper { left: 27.5%; }
    #menu-btn-investigacion-wrapper { left: 45%; }
    #menu-btn-engranaje-wrapper { left: 62.5%; }
    #menu-btn-microscopio-wrapper { left: 80%; }

    /* Posiciones para los modelos animados */
    #model-plantas-wrapper,
    #model-pharma-wrapper,
    #model-investigacion2-wrapper,
    #model-engranaje-wrapper,
    #model-microscopio-wrapper {
        position: absolute;
        width: 60vw;
        height: 60vw;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-plantas-wrapper canvas,
    #model-pharma-wrapper canvas,
    #model-investigacion2-wrapper canvas,
    #model-engranaje-wrapper canvas,
    #model-microscopio-wrapper canvas {
        width: 100% !important;
        height: 100% !important;
    }

    #model-grafico-wrapper,
    #model-cajas-wrapper,
    #model-cajas2-wrapper {
        position: absolute;
        width: 60vw;
        height: 60vw;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #model-grafico-wrapper canvas,
    #model-cajas-wrapper canvas,
    #model-cajas2-wrapper canvas {
        width: 100% !important;
        height: 100% !important;
    }

    #screen18-image {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #screen18 #fondo {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    #screen18 #btn1, #screen18 #btn2 {
      position: absolute;
      width: 30%;
      height: auto;
      cursor: pointer;
      transition: transform 0.2s;
      z-index: 10;
    }

    #screen18 #btn1 {
      top: 29%;
      left: 55%;
    }

    #screen18 #btn2 {
      top: 30%;
      left: 16%;
    }

    #screen18 #btn1:hover, #screen18 #btn2:hover {
      transform: scale(1.05);
    }
    #fda {
      position: absolute;
      top: 1vh;
      left: 77%;
      width: 15%;
    }

    /* Estilos para el scanner mejorado */
    .scanner-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30vw;
      height: 30vw;
      min-width: 250px;
      min-height: 250px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.1);
      border: 0.2vw solid rgba(255, 255, 255, 0.5);
      border-radius: 2vw;
    }

    .scanner-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, rgba(0,255,255,0) 0%, rgba(0,255,255,1) 50%, rgba(0,255,255,0) 100%);
      animation: scanLine 2s ease-in-out infinite;
      box-shadow: 0 0 8px rgba(0,255,255,0.8);
    }

    @keyframes scanLine {
      0% {
        top: 0;
      }
      50% {
        top: calc(100% - 2px);
      }
      100% {
        top: 0;
      }
    }

    .scanner-text {
      color: #fff;
      margin-top: 2vh;
      font-size: 1.2rem;
      text-align: center;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0,0,0,0.5);
      width: 100%;
      position: absolute;
      bottom: -4vh;
      font-weight: bold;
    }

    .scanner-corners {
      position: absolute;
      width: 20px;
      height: 20px;
      border: 2px solid #0ff;
      opacity: 0.8;
    }

    .corner-top-left {
      top: -2px;
      left: -2px;
      border-right: none;
      border-bottom: none;
    }

    .corner-top-right {
      top: -2px;
      right: -2px;
      border-left: none;
      border-bottom: none;
    }

    .corner-bottom-left {
      bottom: -2px;
      left: -2px;
      border-right: none;
      border-top: none;
    }

    .corner-bottom-right {
      bottom: -2px;
      right: -2px;
      border-left: none;
      border-top: none;
    }
    .menu-2-button{
      width: 5vw;
      min-width: 13%;
      position: absolute;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s, opacity 0.3s;
      cursor: pointer !important;
      pointer-events: auto !important;
    }

    .menu-2-button.show-buttons {
      visibility: visible !important;
      opacity: 1 !important;
    }

    /* Estilos para los nuevos botones */
    #operaciones-btn.show-buttons,
    #investigacion-btn.show-buttons,
    #cadena-btn.show-buttons,
    #biotecnologia-btn.show-buttons,
    #vision-btn.show-buttons,
    #glenmark-btn.show-buttons {
        visibility: visible !important;
        opacity: 1 !important;
    }
  

    .menu-button {
        cursor: pointer !important;
        pointer-events: auto !important;
    }

    /* Media queries para ajustar el escalado en diferentes dispositivos */
    @media (max-width: 768px) {
        .contenedor {
            max-width: 100vw;
            height: 85vh;
            transform: scale(calc(min(100vw/1024, 85vh/768)));
        }
    }

    @media (orientation: portrait) {
        .contenedor {
            width: calc(133.33vh * 0.9); /* Mismo ancho que en landscape pero ajustado */
            height: calc(100vh * 0.9); /* Alto ajustado proporcionalmente */
            transform: scale(0.85);
            transform-origin: center center;
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            overflow: hidden;
            height: 100vh;
        }
    }

    @media (orientation: landscape) {
        .contenedor {
            height: calc(100vh * 0.9); /* 90% del alto de la ventana */
            width: calc(133.33vh * 0.9); /* Mantener proporción 4:3 */
            transform: scale(0.85);
            transform-origin: center center;
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            overflow: hidden;
            height: 100vh;
        }
    }

    /* Ajustes específicos para los botones con problemas de color */
    #cadena-btn,
    #biotecnologia-btn,
    #operaciones-btn {
        filter: hue-rotate(45deg) saturate(1.2);
    }
  </style>
</head>

<body>
<video id="camera-feed" autoplay playsinline></video>

<!-- Pantalla de Scanner -->
<div id="scanner-screen" class="screen active">
  <div class="scanner-container">
    <div class="scanner-corners corner-top-left"></div>
    <div class="scanner-corners corner-top-right"></div>
    <div class="scanner-corners corner-bottom-left"></div>
    <div class="scanner-corners corner-bottom-right"></div>
    <div class="scanner-line"></div>
    <div class="scanner-text">Apunte la cámara hacia la tarjeta</div>
  </div>
</div>

<div class="contenedor">
  <!-- Pantalla 2: Inicio -->
  <div id="screen2" class="screen">
    <div id="screen2-image" class="screen-image">
        <img src="./src/img/Recurso (37).png" alt="Inicio">
    </div>
    <div id="model-boton-comenzar-wrapper" class="model-wrapper">
        <div id="model-boton-comenzar" class="model-3d"></div>
    </div>
  </div>

  <!-- Pantalla 3: Introducción -->
  <div id="screen3" class="screen">
    <div id="screen3-image" class="screen-image">
        <img src="./src/img/Recurso (38).png" alt="Introducción">
    </div>
    <div id="model-esfera-inicial-wrapper" class="model-wrapper">
        <div id="model-esfera-inicial" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(3)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-3" onclick="toggleHelp(3)">
  </div>

  <!-- Pantalla 4: Menú Principal -->
  <div id="screen4" class="screen">
    <div id="model-menu-inicial-wrapper" class="model-wrapper">
        <div id="model-menu-inicial" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(4)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-4" onclick="toggleHelp(4)">
  </div>

  <!-- Pantalla 5: Glenmark -->
  <div id="screen5" class="screen">
    <div id="screen5-image" class="screen-image">
        <img src="./src/img/Recurso (26).png" alt="Glenmark">
    </div>
    <div id="model-glenmark-anim-wrapper" class="model-wrapper">
        <div id="model-glenmark" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(5)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-5" onclick="toggleHelp(5)">
  </div>

  <!-- Pantalla 6: Visión -->
  <div id="screen6" class="screen">
    <div id="screen6-image" class="screen-image">
        <img src="./src/img/Recurso (25).png" alt="Visión">
    </div>
    <div id="model-vision-anim-wrapper" class="model-wrapper">
        <div id="model-vision" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(6)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-6" onclick="toggleHelp(6)">
  </div>

  <!-- Pantalla 7: Biotecnología -->
  <div id="screen7" class="screen">
    <div id="screen7-image" class="screen-image">
        <img src="./src/img/Recurso (41).png" alt="Biotecnología">
    </div>
    <div id="model-biotecnologia-anim-wrapper" class="model-wrapper">
        <div id="model-biotecnologia" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(7)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-7" onclick="toggleHelp(7)">
  </div>

  <!-- Pantalla 8: Cadena -->
  <div id="screen8" class="screen">
    <div id="screen8-image" class="screen-image">
        <img src="./src/img/Recurso (23).png" alt="Cadena">
    </div>
    <div id="model-cadena-anim-wrapper" class="model-wrapper">
        <div id="model-cadena" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(8)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-8" onclick="toggleHelp(8)">
  </div>

  <!-- Pantalla 9: Investigación -->
  <div id="screen9" class="screen">
    <div id="screen9-image" class="screen-image">
        <img src="./src/img/Recurso (24).png" alt="Investigación">
    </div>
    <div id="model-investigacion-anim-wrapper" class="model-wrapper">
        <div id="model-investigacion" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(9)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-9" onclick="toggleHelp(9)">
  </div>

  <!-- Pantalla 10: Operaciones -->
  <div id="screen10" class="screen">
    <div id="screen10-image" class="screen-image">
        <img src="./src/img/Recurso (27).png" alt="Operaciones">
    </div>
    <div id="model-operaciones-anim-wrapper" class="model-wrapper">
        <div id="model-operaciones" class="model-3d"></div>
    </div>
    <div id="model-mapa-wrapper" class="model-wrapper">
        <div id="model-mapa" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(4)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(10)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-10" onclick="toggleHelp(10)">
  </div>

  <!-- Pantalla 11: Menú Secundario -->
  <div id="screen11" class="screen">
    <div id="menu-2">
      <img class="menu-2-button" src="./src/img/Buttons/Recurso 9.png" alt="Menú Secundario" onclick="goToPharma()" style="top: 10.5%; left: 72%; z-index: 2;">
      <img class="menu-2-button" src="./src/img/Buttons/Recurso 10.png" alt="Menú Secundario" onclick="goToPlantas()" style="top: 20.5%; left: 29.5%; z-index: 2;">
      <img class="menu-2-button" src="./src/img/Buttons/Recurso 11 (2).png" alt="Menú Secundario" onclick="goToInvestigacion2()" style="top: 51%; left: 29%; width: 21%; z-index: 2;">
      <img class="menu-2-button" src="./src/img/Buttons/Recurso 12.png" alt="Menú Secundario" onclick="goToMicroscopio()" style="top: 50.5%; left: 65.7%; width: 21%; z-index: 2;">
      <img class="menu-2-button" src="./src/img/Buttons/Recurso 13.png" alt="Menú Secundario" onclick="goToEngranaje()" style="top: 39%; left: 47.3%;width: 21%; z-index: 2;">
    </div>
    <div id="screen11-image" class="screen-image">
        <img src="./src/img/Recurso (21).png" alt="Menú Secundario">
    </div>
    <div id="model-menu2-wrapper" class="model-wrapper">
        <div id="model-menu2" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(11)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-11" onclick="toggleHelp(11)">
  </div>

  <!-- Pantalla 12 -->
  <div id="screen12" class="screen">
    <div id="screen12-image" class="screen-image">
        <img src="./src/img/Recurso (32).png" alt="Plantas">
    </div>
    <div id="model-plantas-wrapper" class="model-wrapper">
        <div id="model-plantas" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(11)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(12)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-12" onclick="toggleHelp(12)">
  </div>

  <!-- Pantalla 13 -->
  <div id="screen13" class="screen">
    <div id="screen13-image" class="screen-image">
        <img src="./src/img/Recurso (4).png" alt="Investigación Detalle">
    </div>
    <div id="model-pharma-wrapper" class="model-wrapper">
        <div id="model-pharma" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(11)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(13)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-13" onclick="toggleHelp(13)">
  </div>

  <!-- Pantalla 14 -->
  <div id="screen14" class="screen">
    <div id="screen14-image" class="screen-image">
        <img id="screen14-image-img" src="./src/img/Recurso (5).png" alt="Engranaje Investigación">
    </div>
    <div id="model-investigacion2-wrapper" class="model-wrapper">
        <div id="model-investigacion2" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(11)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(14)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-14" onclick="toggleHelp(14)">
  </div>

  <!-- Pantalla 15 -->
  <div id="screen15" class="screen">
    <div id="screen15-image" class="screen-image">
        <img src="./src/img/Recurso (6).png" alt="Pharma">
    </div>
    <div id="model-engranaje-wrapper" class="model-wrapper">
        <div id="model-engranaje" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(11)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(15)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-15" onclick="toggleHelp(15)">
  </div>

  <!-- Pantalla 16 -->
  <div id="screen16" class="screen">
    <div id="screen16-image" class="screen-image">
        <img src="./src/img/Recurso (7).png" alt="Microscopio">
    </div>
    <div id="model-microscopio-wrapper" class="model-wrapper">
        <div id="model-microscopio" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (35).png" alt="Volver" 
        class="return-button" 
        onclick="showScreen(11)">
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(16)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-16" onclick="toggleHelp(16)">
  </div>

  <!-- Pantalla 17: Gráfico -->
  <div id="screen17" class="screen">
    <div id="screen17-image" class="screen-image">
        <img src="./src/img/Recurso (13).png" alt="Gráfico">
    </div>
    <div id="model-grafico-wrapper" class="model-wrapper">
        <div id="model-grafico" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (34).png" alt="Ayuda" class="help-button" onclick="toggleHelp(17)">
    <img src="./src/img/Recurso (33).png" alt="Ayuda Info" class="help-info" id="help-info-17" onclick="toggleHelp(17)">
  </div>

  <div id="screen18" class="screen">
    <div id="screen18-image" class="screen-image">
      <img id="fondo" src="./src/img/fondo.png" alt="Información">
    </div>
    <img id="btn1" src="./src/img/boton 1.png" alt="btn1" onclick="showScreen(20)">
    <img id="btn2" src="./src/img/boton 2.png" alt="btn2" onclick="showScreen(19)">
  </div>

  <div id="screen19" class="screen">
    <div id="screen19-image" class="screen-image">
        <img src="./src/img/Recurso (15).png" alt="Cajas 1">
        <img id="fda" src="./src/img/Recurso (28).png" alt="Recurso 28">
    </div>
    <div id="model-cajas-wrapper" class="model-wrapper">
        <div id="model-cajas" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (14).png" alt="Ayuda" class="help-button" onclick="toggleHelp(19)">
    <img src="./src/img/Recurso (18).png" alt="Ayuda Info" class="help-info" id="help-info-19" onclick="toggleHelp(19)">
  </div>

  <div id="screen20" class="screen">
    <div id="screen20-image" class="screen-image">
        <img src="./src/img/Recurso (16).png" alt="Cajas 2">
        <img id="fda" src="./src/img/Recurso (28).png" alt="Recurso 28">
    </div>
    <div id="model-cajas2-wrapper" class="model-wrapper">
        <div id="model-cajas2" class="model-3d"></div>
    </div>
    <img src="./src/img/Recurso (14).png" alt="Ayuda" class="help-button" onclick="toggleHelp(20)">
    <img src="./src/img/Recurso (18).png" alt="Ayuda Info" class="help-info" id="help-info-20" onclick="toggleHelp(20)">
  </div>

  <div id="screen21" class="screen">
    <div class="content-wrapper">
      <div class="model-container">
        <img src="./src/img/Recurso (19).png" alt="Final">
      </div>
    </div>
  </div>

  <!-- Botones de navegación -->
  <div class="nav-buttons">
    <img id="prev-button" 
      src="./src/img/Recurso (20).png" 
      alt="Anterior" 
      onclick="previousScreen()" 
      class="nav-button">
    <img id="next-button" 
      src="./src/img/Recurso (36).png" 
      alt="Siguiente" 
      onclick="nextScreen()" 
      class="nav-button">
  </div>
  </div>
</body>

</html>